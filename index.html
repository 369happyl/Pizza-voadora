<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Pizza Survival 2026 - Vers√£o Final</title>
  <style>
    body { margin: 0; overflow: hidden; background-color: #87ceeb; font-family: 'Arial', sans-serif; touch-action: manipulation; }

    #player {
      width: 55px; height: 55px; background-color: #f5deb0; border-radius: 50%;
      position: absolute; left: 50px; border: 4px solid #c29b61; z-index: 50;
    }
    .calabresa { width: 12px; height: 12px; background: red; border-radius: 50%; position: absolute; border: 1px solid #b30000; }
    .azeitona { width: 4px; height: 4px; background: #333; border-radius: 50%; position: absolute; }
    .queijo-p { width: 18px; height: 18px; background: #f1c232; position: absolute; border-radius: 3px; }

    .nuvem {
      width: 80px; height: 45px; background: white; border-radius: 50px;
      position: absolute; box-shadow: 25px 15px 0 10px white, -15px 10px 0 5px white; z-index: 5;
    }

    .chuva {
      background: #4a4a4a !important;
      box-shadow: 25px 15px 0 10px #4a4a4a, -15px 10px 0 5px #4a4a4a !important;
    }
    
    .raio { position: absolute; width: 10px; height: 20px; background: yellow; clip-path: polygon(50% 0%, 0% 60%, 40% 50%, 10% 100%, 100% 40%, 60% 50%); bottom: -30px; left: 30px; }

    .passaro { width: 35px; height: 20px; background: #000; position: absolute; z-index: 15; clip-path: polygon(0% 50%, 40% 0%, 50% 50%, 60% 0%, 100% 50%, 50% 100%); animation: baterAsa 0.2s infinite alternate; }

    .bola { 
      width: 30px; height: 30px; border-radius: 50%; position: absolute; z-index: 60; 
      background: radial-gradient(circle at 10px 10px, #ff00ff, #550055);
      box-shadow: 0 0 15px #ff00ff;
      border: 2px solid white;
    }

    .aviao {
      width: 120px; height: 40px; background: white; position: absolute; z-index: 40;
      border-radius: 20px 50px 20px 20px; border-bottom: 5px solid #ccc;
    }

    @keyframes baterAsa { from { transform: scaleY(1.2); } to { transform: scaleY(0.4); } }

    #ui { position: absolute; top: 20px; left: 20px; font-size: 28px; color: white; text-shadow: 2px 2px 4px rgba(0,0,0,0.3); z-index: 150; }

    .msg { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; color: white; background: rgba(0,0,0,0.9); padding: 30px; border-radius: 20px; display: none; z-index: 200; border: 4px solid #ff6600; }
    button { padding: 12px 25px; font-size: 18px; cursor: pointer; background: #ff6600; color: white; border: none; border-radius: 10px; font-weight: bold; }
  </style>
</head>
<body>

  <div id="ui">XP: <span id="xp">0</span> <br> <small id="level-msg" style="color: #ffeb3b;"></small></div>

  <div id="player">
    <div class="queijo-p" style="top:10px; left:25px;"></div>
    <div class="queijo-p" style="top:30px; left:10px;"></div>
    <div class="calabresa" style="top:5px; left:15px;"></div>
    <div class="calabresa" style="bottom:10px; right:10px;"></div>
    <div class="azeitona" style="top:25px; left:35px;"></div>
    <div class="azeitona" style="bottom:15px; left:15px;"></div>
  </div>

  <div id="game-over" class="msg">
    <h1 id="death-title">GAME OVER!</h1>
    <p id="death-msg"></p>
    <button onclick="location.reload()">TENTAR NOVAMENTE</button>
  </div>

  <script>
    const player = document.getElementById('player');
    const xpDisplay = document.getElementById('xp');
    const levelMsg = document.getElementById('level-msg');
    const gameOverMsg = document.getElementById('game-over');
    
    let playerY = 250;
    let velocity = 0;
    let gravity = 0.25;
    let xp = 0;
    let isGameOver = false;
    let obstacles = [];
    let aviaoPassou = false;

    function jump(e) {
      if (isGameOver) return;
      if (e && e.cancelable) e.preventDefault();
      velocity = -6.5;
    }

    window.addEventListener('mousedown', jump);
    window.addEventListener('touchstart', jump, { passive: false });

    function createObstacle() {
      if (isGameOver) return;

      if (xp >= 400 && !aviaoPassou) {
        aviaoPassou = true;
        const av = document.createElement('div');
        av.className = 'aviao';
        av.style.left = window.innerWidth + 'px';
        av.style.top = '150px';
        av.speed = 12;
        document.body.appendChild(av);
        obstacles.push(av);
        levelMsg.innerText = "CUIDADO: AVI√ÉO!";
        return;
      }

      const obj = document.createElement('div');
      let type = "nuvem", speed = 3, vy = 0;
      const rand = Math.random();

      if (xp >= 300) {
        levelMsg.innerText = "MODO INSANO!";
        if (rand > 0.5) { 
          type = "bola"; 
          speed = 8 + Math.random() * 4; 
          vy = (Math.random() - 0.5) * 6; 
        } else { 
          type = rand > 0.2 ? "chuva" : "passaro"; 
          speed = type === "chuva" ? 9 : 7; 
        }
      } else if (xp >= 200) {
        levelMsg.innerText = "TEMPESTADE!";
        type = rand > 0.5 ? "chuva" : "passaro";
        speed = type === "chuva" ? 8 : 6;
      } else if (xp >= 100) {
        levelMsg.innerText = "P√ÅSSAROS √Ä VISTA!";
        type = rand > 0.6 ? "passaro" : "nuvem";
        speed = type === "passaro" ? 6 : 4;
      }

      obj.classList.add(type);
      if (type === "nuvem" || type === "chuva") {
        obj.classList.add('nuvem');
        if (type === "chuva") {
          const raio = document.createElement('div');
          raio.className = 'raio';
          obj.appendChild(raio);
        }
      }
      
      obj.style.left = window.innerWidth + 'px';
      obj.style.top = Math.random() * (window.innerHeight - 100) + 'px';
      obj.speed = speed;
      obj.vy = vy;
      
      document.body.appendChild(obj);
      obstacles.push(obj);
    }

    function update() {
      if (isGameOver) return;

      velocity += gravity;
      playerY += velocity;

      if (playerY > window.innerHeight - 60) { endGame("CH√ÉO"); return; }
      if (playerY < 0) { playerY = 0; velocity = 0; }
      player.style.top = playerY + 'px';

      obstacles.forEach((ob, index) => {
        let obX = parseFloat(ob.style.left);
        let obY = parseFloat(ob.style.top);
        
        obX -= ob.speed;
        obY += (ob.vy || 0);

        ob.style.left = obX + 'px';
        ob.style.top = obY + 'px';

        if (obX < 40 && !ob.passed) {
          xp += 10;
          xpDisplay.innerText = xp;
          ob.passed = true;
        }

        if (obX < -250) {
          ob.remove();
          obstacles.splice(index, 1);
        }

        if (checkCollision(player, ob)) {
          let causa = "nuvem";
          if(ob.classList.contains("aviao")) causa = "aviao";
          else if(ob.classList.contains("bola")) causa = "bola";
          else if(ob.classList.contains("chuva")) causa = "chuva";
          endGame(causa);
        }
      });

      requestAnimationFrame(update);
    }

    function checkCollision(a, b) {
      const aRect = a.getBoundingClientRect();
      const bRect = b.getBoundingClientRect();
      const padding = 12; 
      return !(aRect.top + padding > bRect.bottom - padding || 
               aRect.bottom - padding < bRect.top + padding || 
               aRect.right - padding < bRect.left + padding || 
               aRect.left + padding > bRect.right - padding);
    }

    function endGame(causa) {
      isGameOver = true;
      const msg = document.getElementById('death-msg');
      const textos = {
        "aviao": "A turbina do avi√£o sugou a pizza! ‚úàÔ∏è",
        "bola": "Boom! Voc√™ bateu na esfera de energia! üîÆ",
        "chuva": "A Nuvem Malvada te eletrocutou! ‚ö°",
        "CH√ÉO": "Regra dos 5 segundos n√£o vale aqui! Voc√™ caiu.",
        "nuvem": "Voc√™ bateu em uma nuvem de gordura trans!"
      };
      msg.innerText = textos[causa] || "Fim de jogo!";
      gameOverMsg.style.display = 'block';
    }

    setInterval(createObstacle, 1500);
    update();
  </script>
</body>
</html>
 
